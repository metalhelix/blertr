#!/usr/bin/env bash

# Run the command, including arguments with spaces
"$@"
status=$?

# decide which status to use
if [ "$status" == "0" ] ; then
    result="completed"
else
    result="FAILED ($status)"
fi

# decide which notifier we have
env growlnotify -h > /dev/null 2> /dev/null
has_growl=$?
env notify-send > /dev/null 2> /dev/null
has_libnotify=$?

# notify the user, growl or libnotify
if [ "$has_growl" == "0" ] ; then
    growlnotify -m "Script '$@' $result" -n "Blert Notification"
elif [ "$has_libnotify" == "0" ] ; then
    notify-send "Script '$@' $result" "Blert Notification" &
fi

# exit with the original status
exit $status

