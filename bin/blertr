#!/usr/bin/env ruby

$:.unshift(File.join(File.dirname(__FILE__), "..", "lib"))

require 'blertr'

action = ARGV.shift
parameters = ARGV

def add_services services, time
  puts services
end

def take_action action, parameters
  if action == "info"
    puts "getting info"
  else
    action_found = false
    actions = action.split(",")
    actions.each do |action|
      if Blertr::Control::is_notifier? action
        action_found = true
        new_time = parameters.join(" ")
        Blertr::Control::change_time action, new_time
      end
    end

    if !action_found
      puts "error #{action} unknown command"
    end

  end
end

if action
  take_action action.downcase, parameters
else
  puts "usage blertr [action] [parameters]"
end
